

<div id="wrapper">
  <div id="topbar">
<img src="/assets/I_CARE_Logo.png" id="icare_logo"/>
      <span id="header_email"><span id="account_header">Account: </span><%= current_user.email %></span>
      <%= link_to image_tag('/assets/LogOut_BTN.png', :border => 0), destroy_user_session_path, :method => :delete, :id => 'signout_link' %>
      
  </div>

  <div id="manager_main_area">
    <div id="instructions">
      <div><h1 style="margin-left: 18px;">API Documentation</h1></div>
	<br/><br/><br/>
	<div id="manager_instructions">	

	  I Care users can also access the site via our API.  <br/><br/>
	  
	  
	  <% if user_signed_in? %>
	    <b>Your user authentication token</b>: <%= current_user.authentication_token %><br/>
	  <% else %>
	    <%= link_to 'Create an account first', :root %>
	  <% end %>
	</div>
      
    </div>
    <table class="api_table">
      <tr>
	<th>Retrieve a list of your topics</th>
	
	<th></th>
      </tr>

  
      <tr class="showcode_row">
	<td colspan="2" >
	   <b>GET</b> http://<%= request.host_with_port %>/sites.json?auth_token=<%= current_user.authentication_token %>
	</td>
      </tr>
	
    
      <tr id="new_topic_row">
	<td>
	   
		<div class="manager_caretopic_left" id="new_caretopic">
		  
				    
		</div>
		<div class="manager_caretopic_right">
		</div>
	  
	</td>
	
	<td class="clicks_to_date_column"></td>
      </tr>
      <tr id="last_row">
	  <td><b>EXAMPLE REQUEST:</b> <code class="prettyprint lang-js">curl -i -H 'Accept: application/json' -X GET http://<%= request.host_with_port %>/sites.json?auth_token=<%= current_user.authentication_token %>
		  </code><br/><br/>
	      <b>EXAMPLE RESPONSE:</b> <code class="prettyprint lang-js">[
	  {"_id":"4f73e3338520025ac5000099","description":"this is my description","name":"this is my topic name","tags":"tag1 tag2 tag3","url":"www.example-url-1.com","votes_count":5},{"_id":"4f73e3338520025ac5000014","description":"this is my second description","name":"this is my second topic name","tags":"tag1 tag2","url":"www.example-url-2.com","votes_count":15}]</code>
	  </td>
      </tr>
    </table>

    <br />
      <table class="api_table">
      <tr>
	<th>Retrieve a specific topic</th>
	
	<th></th>
      </tr>

  
      <tr class="showcode_row">
	<td colspan="2" >
	   <b>GET</b> http://<%= request.host_with_port %>/sites/<b>topic_id</b>?auth_token=<%= current_user.authentication_token %>
	</td>
      </tr>
	
    
      <tr id="new_topic_row">
	<td>
	   
		<div class="manager_caretopic_left" id="new_caretopic">
		 	      
				    
		</div>
		<div class="manager_caretopic_right">
		</div>
	  
	</td>
	
	<td class="clicks_to_date_column"></td>
      </tr>
      <tr id="last_row">
	  <td>&nbsp;&nbsp;&nbsp;
	  </td>
      </tr>
    </table>
    <br/>
    <table class="api_table">
      <tr>
	<th>Update a topic</th>
	
	<th></th>
      </tr>

  
      <tr class="showcode_row">
	<td colspan="2" >
	   <b>PUT</b> http://<%= request.host_with_port %>/sites/<b>topic_id</b>.json?auth_token=<%= current_user.authentication_token %>
	</td>
      </tr>
	
    
      <tr id="new_topic_row">
	<td>
	   
		<div class="manager_caretopic_left" id="new_caretopic">
		 	    
		</div>
		<div class="manager_caretopic_right">
		</div>
	  
	</td>
	
	<td class="clicks_to_date_column"></td>
      </tr>
      <tr id="last_row">
	  <td><b>REQUEST BODY:</b><br/><code   class="prettyprint lang-js">
		site[<b>fieldname</b>]=<b>value for field</b> 
 			 </code>
	      <br/><br/>
	      <b>EXAMPLE:</b> changing name of topic with id 4f73e3338520025ac5000099 to 'Third World Countries'<br/><code   class="prettyprint lang-js">
		curl -i -H 'Accept: application/json'   -X PUT -d 'site[name]=<b>Third World Countries</b>' http://<%= request.host_with_port %>/sites/4f73e3338520025ac5000099.json?auth_token=<%= current_user.authentication_token %>
 			 </code>
	  </td>
      </tr>
    </table>

    <br/>

     <table class="api_table">
      <tr>
	<th>Delete a topic</th>
	
	<th></th>
      </tr>

  
      <tr class="showcode_row">
	<td colspan="2" >
	   <b>DELETE</b> http://<%= request.host_with_port %>/sites/<b>topic_id</b>.json?auth_token=<%= current_user.authentication_token %>
	</td>
      </tr>
	
    
      <tr id="new_topic_row">
	<td>
	   
		<div class="manager_caretopic_left" id="new_caretopic">
	      
				    
		</div>
		<div class="manager_caretopic_right">
		</div>
	  
	</td>
	
	<td class="clicks_to_date_column"></td>
      </tr>
      <tr id="last_row">
	  <td>
	      <b>EXAMPLE:</b> Delete topic with ID 4f73e3338520025ac5000099 <br/><code   class="prettyprint lang-js">
		curl -i -H 'Accept: application/json'   -X DELETE http://<%= request.host_with_port %>/sites/<b>4f73e3338520025ac5000099</b>.json?auth_token=<%= current_user.authentication_token %>
 			 </code>
	  </td>
      </tr>
    </table>

    <br/>

    <table class="api_table">
      <tr>
	<th>Create a topic</th>
	
	<th></th>
      </tr>

  
      <tr class="showcode_row">
	<td colspan="2" >
	   <b>POST</b> http://<%= request.host_with_port %>/sites.json?auth_token=<%= current_user.authentication_token %>
	</td>
      </tr>
	
    
      <tr id="new_topic_row">
	<td>
	   
		<div class="manager_caretopic_left" id="new_caretopic">
		 	      
				    
		</div>
		<div class="manager_caretopic_right">
		</div>
	  
	</td>
	
	<td class="clicks_to_date_column"></td>
      </tr>
      <tr id="last_row">
	  <td><b>JSON:</b><br/><code   class="prettyprint lang-js">
	  {"description":"[enter description]","name":"[enter name]","tags":[enter tags],"url":"[enter your site URL]"}}      
		 </code>	
	  
	  </td>
      </tr>
    </table>
  </div>

<br/>
    
  </div>

 

